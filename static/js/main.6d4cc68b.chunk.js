(this["webpackJsonpcoherent-states"]=this["webpackJsonpcoherent-states"]||[]).push([[0],{43:function(e,n,t){},60:function(e,n){},63:function(e,n,t){"use strict";t.r(n);var a=t(2),i=t.n(a),r=t(30),c=t.n(r),s=(t(43),t(13)),o=t(6),l=t(14),u=(t(44),t(7)),d=t.n(u),p=t(17),j=t(23);var h,f,m,b=t(4);function v(e){var n=e.onInit,t=e.onResize,i=e.animate,r=e.setUniforms,c=function(e){var n=Object(a.useState)({width:null,height:null}),t=Object(o.a)(n,2),i=t[0],r=t[1];function c(){var n=document.getElementById(e);r({width:n.offsetWidth,height:n.offsetHeight})}return Object(a.useEffect)((function(){return window.addEventListener("resize",c),c(),function(){return window.removeEventListener("resize",c)}}),[]),i}("canvas-container"),u=c.width,v=c.height,x=Object(a.useState)(null),O=Object(o.a)(x,2),g=O[0],w=O[1];return Object(a.useEffect)((function(){Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:t=e.sent,w(t),r(t.uniforms),i(t,r);case 6:case"end":return e.stop()}}),e)})))()}),[n,i,r]),Object(a.useEffect)((function(){t(g,u,v)}),[t,g,u,v]),Object(b.jsxs)("div",{id:"canvas-container",className:Object(l.a)(h||(h=Object(s.a)(["\n        flex-grow: 1;\n        overflow: hidden;\n        position: relative;\n    "]))),children:[Object(b.jsx)("div",{className:Object(l.a)(f||(f=Object(s.a)(["\n            position: absolute;\n            top: 32px;\n            left: 32px;\n            color: white;\n            opacity: 0.8;\n            z-index: 2;\n\n            font-size: 24px;\n\n            @media (max-width: 1000px) {\n                font-size: 20px;\n                top: 16px;\n                left: 16px;\n            }\n        "]))),children:Object(b.jsx)(j.InlineMath,{children:"Q(\\theta, \\phi) \\propto |\\langle\\theta, \\phi \\, | \\, \\psi\\rangle|^2"})}),Object(b.jsx)("canvas",{id:"main",width:u,height:v,className:Object(l.a)(m||(m=Object(s.a)(["\n            display: block;\n        "])))})]})}var x,O,g,w,y,S,z,M,C=t(21),I=t(77);function F(e){var n=e.children;return Object(b.jsx)("h2",{className:Object(l.a)(x||(x=Object(s.a)(["\n        margin-top: 32px;\n\n        font-size: 14px;\n        color: hsl(200, 10%, 40%);\n        font-weight: 500;\n        letter-spacing: 0.09em;\n        text-transform: uppercase;\n\n        @media (max-width: 1000px) {\n            font-size: 12px;\n            margin-top: 16px;\n        }\n    "]))),children:n})}function N(e){for(var n=[],t=1,a=0;a<=Math.floor(e/2);a++){if(a>3){n.push("\\cdots");break}var i=t*(e+1-2*a)/(e+1);i>1?n.push("\\mathbf{".concat(e+1-2*a,"}^{\\otimes").concat(i,"}")):n.push("\\mathbf{".concat(e+1-2*a,"}")),t*=e+1-a,t/=a+1}return"\\mathbf{2}^{\\otimes ".concat(e,"} = ")+n.join("\\oplus")}function q(e){var n=e.spin,t=e.amplitudes,a=e.setAmplitude;if(void 0===t)return null;for(var i=[],r=function(){var e=Object(o.a)(u[c],2),t=e[0],r=e[1];if(t>n-1)return"continue";var d=r.length();i.push(Object(b.jsxs)("div",{className:Object(l.a)(O||(O=Object(s.a)(["\n            color: hsl(200, 10%, 30%);\n            display: flex;\n            flex-direction: row;\n        "]))),children:[Object(b.jsx)("span",{className:Object(l.a)(g||(g=Object(s.a)(["min-width: 64px;"]))),children:Object(b.jsx)(j.InlineMath,{children:"|".concat(t,"\\rangle")})}),Object(b.jsx)(I.a,{min:0,max:1,step:.001,value:d,onChange:function(e,n){return a(t,n)}})]},t))},c=0,u=Object.entries(t);c<u.length;c++)r();return Object(b.jsx)(b.Fragment,{children:i})}function k(e){var n=e.uniforms,t=e.setUniform;if(void 0===n.drive)return null;for(var a=[],i=function(){var e,i=Object(o.a)(c[r],2),u=i[0],d=i[1];a.push(Object(b.jsxs)("div",{className:Object(l.a)(w||(w=Object(s.a)(["\n            color: hsl(200, 10%, 30%);\n            display: flex;\n            flex-direction: row;\n        "]))),children:[Object(b.jsx)("span",{className:Object(l.a)(y||(y=Object(s.a)(["\n                min-width: 120px;\n                color: hsl(200, 10%, 15%);\n                font-size: 12pt;\n                white-space: nowrap;\n            "]))),children:u}),Object(b.jsx)(I.a,{min:-1,max:1,step:.25,marks:!0,value:null===(e=n[d])||void 0===e?void 0:e.value,onChange:function(e,n){return t(d,n)},valueLabelDisplay:"auto"})]},d))},r=0,c=[["Detuning","detuning"],["Drive Strength","drive"],["Squeezing","squeezing"]];r<c.length;r++)i();return Object(b.jsx)(b.Fragment,{children:a})}function D(e){var n=e.name,t=e.value,a=e.err,i=e.unit,r="".concat(t.toFixed(3)," \\, \\pm \\, ").concat(a.toFixed(3));return void 0===i?Object(b.jsx)(j.InlineMath,{children:"\\langle ".concat(n,"\\rangle = ").concat(r)}):Object(b.jsx)(j.InlineMath,{children:"\\langle ".concat(n,"\\rangle = (").concat(r,") \\, ").concat(i)})}function E(e){for(var n=e.spin,t=e.amplitudes,a=0,i=0;i<n;i++){a+=t[i].lengthSq()*i}for(var r=0,c=0;c<n;c++){r+=t[c].lengthSq()*Math.pow(c-a,2)}return r=Math.sqrt(r),Object(b.jsx)("div",{className:Object(l.a)(S||(S=Object(s.a)(["\n        display: flex;\n        flex-direction: column;\n        \n        justify-content: space-between;\n        min-height: 60px;\n    "]))),children:Object(b.jsx)(D,{name:"S_z",value:a-(n-1)/2,err:r,unit:"\\hbar"})})}function L(e){var n,t,a=e.uniforms,i=e.setUniforms,r=null===(n=a.spin)||void 0===n?void 0:n.value,c=r-1,o=null===(t=a.spinComponents)||void 0===t?void 0:t.value;function u(e,n){a[e].value=n,i(Object(C.a)({},a))}return Object(b.jsxs)("div",{className:Object(l.a)(z||(z=Object(s.a)(["\n        min-width: 400px;\n        background-color: white;\n        box-shadow: 1px 1px 4px hsla(200, 10%, 10%, 0.1);\n        font-size: 18px;\n        padding: 32px;\n\n        @media (max-width: 1000px) {\n            min-width: unset;\n            padding: 20px;\n\n            font-size: 14px;\n        }\n    "]))),children:[Object(b.jsxs)("span",{children:[c,c>1?" atoms":" atom"]}),Object(b.jsx)(I.a,{value:c,onChange:function(e,n){return t=n+1,void u("spin",Math.max(2,Math.min(14,t)));var t},step:1,min:1,max:13,marks:!0}),Object(b.jsx)(F,{children:"Spin Decomposition"}),Object(b.jsx)(j.InlineMath,{children:N(c)}),Object(b.jsxs)("div",{className:Object(l.a)(M||(M=Object(s.a)(["\n            @media (max-width: 1000px) {\n                display: none;\n            }\n        "]))),children:[Object(b.jsx)(F,{children:"Drive Fields"}),Object(b.jsx)(k,{uniforms:a,setUniform:u}),Object(b.jsx)(F,{children:"Stretched Representation Amplitudes"}),Object(b.jsx)(E,{spin:r,amplitudes:o}),Object(b.jsx)(q,{spin:r,amplitudes:o,setAmplitude:function(e,n){var t=a.spinComponents.value[e],r=t.length();0===r?(t.x=n,t.y=0):(t.x*=n/r,t.y*=n/r),i(Object(C.a)({},a))}})]})]})}var V=t(8),P=t(10),A=t.p+"static/media/sphereVert.074410ee.glsl",B=t.p+"static/media/sphereFrag.75020784.glsl",U=t(52)(P);function R(){return G.apply(this,arguments)}function G(){return(G=Object(p.a)(d.a.mark((function e(){var n,t,a,i,r,c,s,o,l,u,p,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Initializing WebGL"),n=document.getElementById("main"),t=n.getContext("webgl"),n.addEventListener("touchstart",(function(e){return e.preventDefault()})),(a=new P.Scene).background=new P.Color(526344),i=new P.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),r=new P.WebGLRenderer({context:t}),e.next=10,fetch(A);case 10:return e.next=12,e.sent.text();case 12:return c=e.sent,e.next=15,fetch(B);case 15:return e.next=17,e.sent.text();case 17:return s=e.sent,14,(o={spin:{value:13},spinComponents:{value:Object(V.a)(new Array(14)).map((function(){return new P.Vector2(0,0)}))},drive:{value:.5},detuning:{value:.5},squeezing:{value:0}}).spinComponents.value[6].x=1,l=new P.Mesh(new P.SphereGeometry(.99,32,32),new P.ShaderMaterial({defines:{MAX_SIZE:14,M_PI:Math.PI},uniforms:o,vertexShader:c,fragmentShader:s})),a.add(l),u=[new P.Vector3(0,0,0),new P.Vector3(1.5,0,0),new P.Vector3(0,0,0),new P.Vector3(0,1.5,0),new P.Vector3(0,0,0),new P.Vector3(0,0,1.5)],p=new P.LineSegments((new P.BufferGeometry).setFromPoints(u),new P.LineBasicMaterial({color:8421504})),a.add(p),(j=new U(i,n)).enableDamping=!0,j.rotateSpeed=.3,j.minDistance=1.5,j.maxDistance=5,i.position.z=3,e.abrupt("return",{gl:t,scene:a,camera:i,renderer:r,controls:j,sphere:l,uniforms:o});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,n,t){if(console.log("Resizing",n,t),null!==e){var a=e.renderer,i=e.camera;i.aspect=n/t,i.updateProjectionMatrix(),a.setSize(n,t)}}var W=t(76);var _,H=[void 0,void 0,void 0,void 0],J=void 0;function Q(e,n){var t=e.spin.value,a=e.spinComponents.value,i=e.drive.value,r=e.detuning.value,c=e.squeezing.value,s=void 0;if(t===H[0]&i===H[1]&r===H[2]&c===H[3])s=J;else{console.log("Cache miss");for(var o=function(e,n){for(var t=Object(W.h)(e,e),a=(e-1)/2,i=1;i<e;i++){var r=.5*n*Math.sqrt(2*i*(a+1)-i*(i+1));t.subset(Object(W.d)(i-1,i),r),t.subset(Object(W.d)(i,i-1),r)}return t}(t,i),l=0;l<t;l++){var u=l-(t-1)/2;o.subset(Object(W.d)(l,l),r*u+c*Math.pow(u,2))}s=function(e,n){var t=Object(W.c)(e);return Object(W.f)(Object(W.e)(Object(W.a)(t,Object(W.f)(-.5,n))),Object(W.a)(t,Object(W.f)(.5,n)))}(t,Object(W.f)(Object(W.b)(0,-n),o)),H=[t,i,r,c],J=s}for(var d=a.slice(0,t).map((function(e){var n=e.x,t=e.y;return Object(W.b)(n,t)})),p=Object(W.f)(s,d),j=0;j<t;j++){var h=Object(W.g)(p,Object(W.d)(j));a[j].x=h.re,a[j].y=h.im}!function(e){for(var n=e.spin.value,t=e.spinComponents.value,a=0,i=0;i<n;i++)a+=t[i].lengthSq();a=Math.sqrt(a+.001);for(var r=0;r<n;r++)t[r].x/=a,t[r].y/=a}(e)}function X(e,n){var t=e.renderer,a=e.scene,i=e.camera,r=e.controls,c=e.uniforms;if(requestAnimationFrame((function(){return X(e,n)})),null!==e){t.render(a,i),r.update();var s=performance.now();if(void 0!==e.lastTime){Q(c,1/30),n(Object(C.a)({},c))}e.lastTime=s}}var Z=function(){var e=Object(a.useState)({}),n=Object(o.a)(e,2),t=n[0],i=n[1];return Object(b.jsxs)("div",{className:Object(l.a)(_||(_=Object(s.a)(["\n        width: 100%;\n        height: 100%;\n\n        display: flex;\n        flex-direction: row;\n\n        @media (max-width: 1000px) {\n             flex-direction: column;\n        }\n  "]))),children:[Object(b.jsx)(L,{uniforms:t,setUniforms:i}),Object(b.jsx)(v,{onInit:R,onResize:T,animate:X,setUniforms:i})]})},K=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,78)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),a(e),i(e),r(e),c(e)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(Z,{})}),document.getElementById("root")),K()}},[[63,1,2]]]);
//# sourceMappingURL=main.6d4cc68b.chunk.js.map