(this["webpackJsonpcoherent-states"]=this["webpackJsonpcoherent-states"]||[]).push([[0],{43:function(e,n,t){},60:function(e,n){},63:function(e,n,t){"use strict";t.r(n);var a=t(2),i=t.n(a),r=t(30),c=t.n(r),s=(t(43),t(12)),o=t(6),l=t(13),u=(t(44),t(7)),d=t.n(u),p=t(17),h=t(23);var j,m,f,b=t(4);function x(e){var n=e.onInit,t=e.onResize,i=e.animate,r=e.setUniforms,c=function(e){var n=Object(a.useState)({width:null,height:null}),t=Object(o.a)(n,2),i=t[0],r=t[1];function c(){var n=document.getElementById(e);r({width:n.offsetWidth,height:n.offsetHeight})}return Object(a.useEffect)((function(){return window.addEventListener("resize",c),c(),function(){return window.removeEventListener("resize",c)}}),[]),i}("canvas-container"),u=c.width,x=c.height,v=Object(a.useState)(null),O=Object(o.a)(v,2),g=O[0],w=O[1];return Object(a.useEffect)((function(){Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:t=e.sent,w(t),r(t.uniforms),i(t,r);case 6:case"end":return e.stop()}}),e)})))()}),[n,i,r]),Object(a.useEffect)((function(){t(g,u,x)}),[t,g,u,x]),Object(b.jsxs)("div",{id:"canvas-container",className:Object(l.a)(j||(j=Object(s.a)(["\n        flex-grow: 1;\n        overflow: hidden;\n        position: relative;\n    "]))),children:[Object(b.jsx)("div",{className:Object(l.a)(m||(m=Object(s.a)(["\n            position: absolute;\n            top: 32px;\n            left: 32px;\n            color: white;\n            opacity: 0.8;\n            z-index: 2;\n\n            font-size: 24px;\n\n            @media (max-width: 1000px) {\n                font-size: 20px;\n                top: 16px;\n                left: 16px;\n            }\n        "]))),children:Object(b.jsx)(h.InlineMath,{children:"Q(\\theta, \\phi) \\propto |\\langle\\theta, \\phi \\, | \\, \\psi\\rangle|^2"})}),Object(b.jsx)("canvas",{id:"main",width:u,height:x,className:Object(l.a)(f||(f=Object(s.a)(["\n            display: block;\n        "])))})]})}var v,O,g,w,y,z,S,M,C,I,N=t(21),F=t(77);function q(e){var n=e.children;return Object(b.jsx)("h2",{className:Object(l.a)(v||(v=Object(s.a)(["\n        margin-top: 32px;\n\n        font-size: 14px;\n        color: hsl(200, 10%, 40%);\n        font-weight: 500;\n        letter-spacing: 0.09em;\n        text-transform: uppercase;\n\n        @media (max-width: 1000px) {\n            font-size: 12px;\n            margin-top: 16px;\n        }\n    "]))),children:n})}function k(e){for(var n=[],t=1,a=0;a<=Math.floor(e/2);a++){if(a>3){n.push("\\cdots");break}var i=t*(e+1-2*a)/(e+1);i>1?n.push("\\mathbf{".concat(e+1-2*a,"}^{\\otimes").concat(i,"}")):n.push("\\mathbf{".concat(e+1-2*a,"}")),t*=e+1-a,t/=a+1}return"\\mathbf{2}^{\\otimes ".concat(e,"} = ")+n.join("\\oplus")}function D(e){var n=e.spin,t=e.amplitudes,a=e.setAmplitude;if(void 0===t)return null;for(var i=[],r=function(){var e=Object(o.a)(u[c],2),t=e[0],r=e[1];if(t>n-1)return"continue";var d=r.length();i.push(Object(b.jsxs)("div",{className:Object(l.a)(O||(O=Object(s.a)(["\n            color: hsl(200, 10%, 30%);\n            display: flex;\n            flex-direction: row;\n        "]))),children:[Object(b.jsx)("span",{className:Object(l.a)(g||(g=Object(s.a)(["min-width: 64px;"]))),children:Object(b.jsx)(h.InlineMath,{children:"|".concat(t,"\\rangle")})}),Object(b.jsx)(F.a,{min:0,max:1,step:.001,value:d,onChange:function(e,n){return a(t,n)}})]},t))},c=0,u=Object.entries(t);c<u.length;c++)r();return Object(b.jsx)(b.Fragment,{children:i})}function E(e){var n=e.uniforms,t=e.setUniform;if(void 0===n.drive)return null;for(var a=[],i=function(){var e,i=Object(o.a)(c[r],2),u=i[0],d=i[1];a.push(Object(b.jsxs)("div",{className:Object(l.a)(w||(w=Object(s.a)(["\n            color: hsl(200, 10%, 30%);\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n            \n            @media (max-width: 1000px) {\n                max-height: 24px;\n            }\n\n        "]))),children:[Object(b.jsx)("span",{className:Object(l.a)(y||(y=Object(s.a)(["\n                min-width: 120px;\n                color: hsl(200, 10%, 15%);\n                font-size: 12pt;\n                white-space: nowrap;\n\n                @media (max-width: 1000px) {\n                    font-size: 11pt;\n                }\n            "]))),children:u}),Object(b.jsx)(F.a,{min:-1,max:1,step:.25,marks:!0,value:null===(e=n[d])||void 0===e?void 0:e.value,onChange:function(e,n){return t(d,n)},valueLabelDisplay:"auto"})]},d))},r=0,c=[["Detuning","detuning"],["Drive Strength","drive"],["Squeezing","squeezing"]];r<c.length;r++)i();return Object(b.jsx)(b.Fragment,{children:a})}function L(e){var n=e.name,t=e.value,a=e.err,i=e.unit,r="".concat(t.toFixed(3)," \\, \\pm \\, ").concat(a.toFixed(3));return void 0===i?Object(b.jsx)(h.InlineMath,{children:"\\langle ".concat(n,"\\rangle = ").concat(r)}):Object(b.jsx)(h.InlineMath,{children:"\\langle ".concat(n,"\\rangle = (").concat(r,") \\, ").concat(i)})}function V(e){for(var n=e.spin,t=e.amplitudes,a=0,i=0;i<n;i++){a+=t[i].lengthSq()*i}for(var r=0,c=0;c<n;c++){r+=t[c].lengthSq()*Math.pow(c-a,2)}return r=Math.sqrt(r),Object(b.jsx)("div",{className:Object(l.a)(z||(z=Object(s.a)(["\n        display: flex;\n        flex-direction: column;\n        \n        justify-content: space-between;\n        min-height: 60px;\n    "]))),children:Object(b.jsx)(L,{name:"S_z",value:a-(n-1)/2,err:r,unit:"\\hbar"})})}function P(e){var n,t,a=e.uniforms,i=e.setUniforms,r=null===(n=a.spin)||void 0===n?void 0:n.value,c=r-1,o=null===(t=a.spinComponents)||void 0===t?void 0:t.value;function u(e,n){a[e].value=n,i(Object(N.a)({},a))}return Object(b.jsxs)("div",{className:Object(l.a)(S||(S=Object(s.a)(["\n        min-width: 400px;\n        background-color: white;\n        box-shadow: 1px 1px 4px hsla(200, 10%, 10%, 0.1);\n        font-size: 18px;\n        padding: 32px;\n\n        @media (max-width: 1000px) {\n            min-width: unset;\n            padding: 22px;\n\n            font-size: 14px;\n        }\n    "]))),children:[Object(b.jsxs)("div",{className:Object(l.a)(M||(M=Object(s.a)(["\n            @media (max-width: 1000px) {\n                margin-top: -8px;\n                margin-bottom: -8px;\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n            }\n        "]))),children:[Object(b.jsxs)("span",{className:Object(l.a)(C||(C=Object(s.a)(["\n                white-space: nowrap;\n                margin-right: 10px;\n            "]))),children:[c,c>1?" atoms":" atom"]}),Object(b.jsx)(F.a,{value:c,onChange:function(e,n){return t=n+1,void u("spin",Math.max(2,Math.min(14,t)));var t},step:1,min:1,max:13,marks:!0})]}),Object(b.jsx)(q,{children:"Spin Decomposition"}),Object(b.jsx)(h.InlineMath,{children:k(c)}),Object(b.jsx)(q,{children:"Drive Fields"}),Object(b.jsx)(E,{uniforms:a,setUniform:u}),Object(b.jsxs)("div",{className:Object(l.a)(I||(I=Object(s.a)(["\n            @media (max-width: 1000px) {\n                display: none;\n            }\n        "]))),children:[Object(b.jsx)(q,{children:"Stretched Representation Amplitudes"}),Object(b.jsx)(V,{spin:r,amplitudes:o}),Object(b.jsx)(D,{spin:r,amplitudes:o,setAmplitude:function(e,n){var t=a.spinComponents.value[e],r=t.length();0===r?(t.x=n,t.y=0):(t.x*=n/r,t.y*=n/r),i(Object(N.a)({},a))}})]})]})}var A=t(8),B=t(10),U=t.p+"static/media/sphereVert.074410ee.glsl",R=t.p+"static/media/sphereFrag.75020784.glsl",G=t(52)(B);function T(){return W.apply(this,arguments)}function W(){return(W=Object(p.a)(d.a.mark((function e(){var n,t,a,i,r,c,s,o,l,u,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Initializing WebGL"),n=document.getElementById("main"),t=n.getContext("webgl"),n.addEventListener("touchstart",(function(e){return e.preventDefault()})),(a=new B.Scene).background=new B.Color(526344),i=new B.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),r=new B.WebGLRenderer({context:t}),e.next=10,fetch(U);case 10:return e.next=12,e.sent.text();case 12:return c=e.sent,e.next=15,fetch(R);case 15:return e.next=17,e.sent.text();case 17:return s=e.sent,14,(o={spin:{value:13},spinComponents:{value:Object(A.a)(new Array(14)).map((function(){return new B.Vector2(0,0)}))},drive:{value:.5},detuning:{value:.5},squeezing:{value:0}}).spinComponents.value[6].x=1,l=new B.Mesh(new B.SphereGeometry(.99,32,32),new B.ShaderMaterial({defines:{MAX_SIZE:14,M_PI:Math.PI},uniforms:o,vertexShader:c,fragmentShader:s})),a.add(l),u=[new B.Vector3(0,0,0),new B.Vector3(1.5,0,0),new B.Vector3(0,0,0),new B.Vector3(0,1.5,0),new B.Vector3(0,0,0),new B.Vector3(0,0,1.5)],p=new B.LineSegments((new B.BufferGeometry).setFromPoints(u),new B.LineBasicMaterial({color:8421504})),a.add(p),(h=new G(i,n)).enableDamping=!0,h.rotateSpeed=.3,h.minDistance=1.5,h.maxDistance=5,i.position.z=3,e.abrupt("return",{gl:t,scene:a,camera:i,renderer:r,controls:h,sphere:l,uniforms:o});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,n,t){if(console.log("Resizing",n,t),null!==e){var a=e.renderer,i=e.camera;i.aspect=n/t,i.updateProjectionMatrix(),a.setSize(n,t)}}var H=t(76);var J,Q=[void 0,void 0,void 0,void 0],X=void 0;function Z(e,n){var t=e.spin.value,a=e.spinComponents.value,i=e.drive.value,r=e.detuning.value,c=e.squeezing.value,s=void 0;if(t===Q[0]&i===Q[1]&r===Q[2]&c===Q[3])s=X;else{console.log("Cache miss");for(var o=function(e,n){for(var t=Object(H.h)(e,e),a=(e-1)/2,i=1;i<e;i++){var r=.5*n*Math.sqrt(2*i*(a+1)-i*(i+1));t.subset(Object(H.d)(i-1,i),r),t.subset(Object(H.d)(i,i-1),r)}return t}(t,i),l=0;l<t;l++){var u=l-(t-1)/2;o.subset(Object(H.d)(l,l),r*u+c*Math.pow(u,2))}s=function(e,n){var t=Object(H.c)(e);return Object(H.f)(Object(H.e)(Object(H.a)(t,Object(H.f)(-.5,n))),Object(H.a)(t,Object(H.f)(.5,n)))}(t,Object(H.f)(Object(H.b)(0,-n),o)),Q=[t,i,r,c],X=s}for(var d=a.slice(0,t).map((function(e){var n=e.x,t=e.y;return Object(H.b)(n,t)})),p=Object(H.f)(s,d),h=0;h<t;h++){var j=Object(H.g)(p,Object(H.d)(h));a[h].x=j.re,a[h].y=j.im}!function(e){for(var n=e.spin.value,t=e.spinComponents.value,a=0,i=0;i<n;i++)a+=t[i].lengthSq();a=Math.sqrt(a+.001);for(var r=0;r<n;r++)t[r].x/=a,t[r].y/=a}(e)}function K(e,n){var t=e.renderer,a=e.scene,i=e.camera,r=e.controls,c=e.uniforms;if(requestAnimationFrame((function(){return K(e,n)})),null!==e){t.render(a,i),r.update();var s=performance.now();if(void 0!==e.lastTime){Z(c,1/30),n(Object(N.a)({},c))}e.lastTime=s}}var Y=function(){var e=Object(a.useState)({}),n=Object(o.a)(e,2),t=n[0],i=n[1];return Object(b.jsxs)("div",{className:Object(l.a)(J||(J=Object(s.a)(["\n        width: 100%;\n        height: 100%;\n\n        display: flex;\n        flex-direction: row;\n\n        @media (max-width: 1000px) {\n             flex-direction: column;\n        }\n  "]))),children:[Object(b.jsx)(P,{uniforms:t,setUniforms:i}),Object(b.jsx)(x,{onInit:T,onResize:_,animate:K,setUniforms:i})]})},$=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,78)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),a(e),i(e),r(e),c(e)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(Y,{})}),document.getElementById("root")),$()}},[[63,1,2]]]);
//# sourceMappingURL=main.c0c283de.chunk.js.map